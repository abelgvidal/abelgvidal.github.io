<!doctype html><html><head><title>Abel's notes - What Happens When Kubernetes Deletes a Pod? </title><link rel=stylesheet type=text/css href=/css/fonts.css><link rel=stylesheet type=text/css href=/css/fontawesome.css><link rel=stylesheet type=text/css href=/css/styles.min.d1b3428734153d8c3b5e2f3598da20a6372f630ae87c763594b98c554c580343.css><meta charset=UTF-8><meta name=author content="Abel GonzÃ¡lez Vidal"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-37PFXMQRGD"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37PFXMQRGD")</script><script type=text/javascript async src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><header class=page-header><div class=myname><h2><a href=https://blog.lpsz.org/>Abel's notes</a></h2></div><nav><ul class=navbar><li><a href=/tags/til><span>TIL</span></a></li><li><a href=/posts><span>Archive</span></a></li><li><a href=/tags/books/><span>Books</span></a></li><li><a href=/posts/aboutme/><span>About me</span></a></li></ul></nav></header><div id=content><main><article><h1 class="page-title blog">What Happens When Kubernetes Deletes a Pod?</h1><p class=blog-post-info>Posted: <time>2025-12-18</time>
<span class=blog-taxonomy-info>&nbsp; | &nbsp; Tags:
<a class=blog-taxonomy-info href=/tags/kubernetes>kubernetes</a></span></p><div class=blog-post-content><p>Graceful termination of pods in Kubernetes is essential to prevent data loss, minimize interruptions, and ensure services are stopped in a controlled manner. This process occurs when Kubernetes deletes a pod, whether due to a Deployment update, scaling, eviction for lack of resources, or when the user manually deletes the pod. Understanding how graceful termination works helps you design more robust applications.</p><p>When Kubernetes wants to terminate a pod, it gives it the opportunity to shut down gracefully.</p><ul><li>The preStop hook (if it exists) is executed before killing the pod. This is a good place to:<ul><li>add code that waits for connections to close</li><li>notify other components</li><li>clean up resources</li></ul></li></ul><p>For example, you can define a preStop hook and configure the grace period (terminationGracePeriodSeconds) in the manifest of a Pod or a Deployment. Below is how to do it in a Deployment, which is the most common resource:</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8b008b;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>ejemplo-graceful<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#8b008b;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#b452cd>1</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>selector</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>app</span>:<span style=color:#bbb> </span>ejemplo-graceful<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:#8b008b;font-weight:700>template</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>metadata</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>labels</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#8b008b;font-weight:700>app</span>:<span style=color:#bbb> </span>ejemplo-graceful<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#8b008b;font-weight:700>spec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>terminationGracePeriodSeconds</span>:<span style=color:#bbb> </span><span style=color:#b452cd>60</span><span style=color:#bbb>  </span><span style=color:#228b22># Custom grace period (default is 30 seconds)</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>      </span><span style=color:#8b008b;font-weight:700>containers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- <span style=color:#8b008b;font-weight:700>name</span>:<span style=color:#bbb> </span>app<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>image</span>:<span style=color:#bbb> </span>tu-imagen<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>          </span><span style=color:#8b008b;font-weight:700>lifecycle</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#8b008b;font-weight:700>preStop</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>              </span><span style=color:#8b008b;font-weight:700>exec</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#8b008b;font-weight:700>command</span>:<span style=color:#bbb> </span>[<span style=color:#cd5555>&#34;/bin/sh&#34;</span>,<span style=color:#bbb> </span><span style=color:#cd5555>&#34;-c&#34;</span>,<span style=color:#bbb> </span><span style=color:#cd5555>&#34;echo &#39;Cerrando conexiones...&#39; &amp;&amp; sleep 10&#34;</span>]<span style=color:#bbb>
</span></span></span></code></pre></div><ul><li>Kubernetes marks the pod with status=TERMINATING</li><li>Kubernetes marks the pod as NotReady</li><li>Because it is marked as NotReady, its endpoint is removed from the service endpoints (it no longer receives traffic)</li><li>Then, Kubernetes sends a SIGTERM signal to the main process in each container of the pod.</li><li>This allows a period (default 30 seconds, configurable with terminationGracePeriodSeconds) for the process to terminate by itself.</li><li>If the process does not terminate by itself, Kubernetes sends a SIGKILL signal to the main process in each container of the pod.</li></ul><p>In summary, taking advantage of graceful termination mechanisms in Kubernetes allows your applications to properly handle closing connections, notifying other services, and releasing resources. Always configure the grace period according to your application&rsquo;s needs and use the preStop hook to avoid unnecessary interruptions or data loss.</p></div></article></main></div><footer><span></span></footer></body></html>